import logging

from telegram import KeyboardButton, ReplyKeyboardMarkup, Update
from telegram.ext import CallbackContext, ContextTypes

from app.utils.helpers import get_safe_message_from_update

logger = logging.getLogger(__name__)

START_TEXT = (
    '–ü—Ä–∏–≤–µ—Ç! üëã –Ø ‚Äî –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –≤–∞–º —É–¥–æ–±–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å '
    '<b>—Ä–µ—Ü–µ–ø—Ç—ã</b>, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–∏—Å—å –≤ <b>–¢–∏–∫–¢–æ–∫–µ</b> –∏–ª–∏ '
    '<b>–ò–Ω—Å—Ç–∞–≥—Ä–∞–º–µ</b>. –í–æ—Ç —á—Ç–æ —è –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –≤–∞—Å:\n\n'
    '‚ú® <b>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã</b> –∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –∏–∑ –≤–∏–¥–µ–æ\n'
    'üîç <b>–ò—Å–∫–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã</b> –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º\n'
    'üé≤ <b>–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–ª—É—á–∞–π–Ω–æ–µ –±–ª—é–¥–æ</b> –∏–∑ –≤–∞—à–∏—Ö —Å–æ—Ö—Ä–∞–Ω—ë–Ω–æ–∫\n'
    'üì© <b>–ß—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</b> ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏—à–ª–∏—Ç–µ –º–Ω–µ —Å—Å—ã–ª–∫—É '
    '–Ω–∞ Reels –∏–ª–∏ TikTok.\n\n'
    '<b>–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ</b> üëá'
)

HELP_TEXT = (
    'ü§ñ <b>SmartMenuBot</b> ‚Äî –≤–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∏–∑ '
    'TikTok –∏ Reels!\n\n'
    '<b>üìå –ß—Ç–æ —è —É–º–µ—é:</b>\n'
    '‚Ä¢ –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã –∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –∏–∑ –≤–∏–¥–µ–æ\n'
    '‚Ä¢ –°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–∑–∞–≤—Ç—Ä–∞–∫, –æ–±–µ–¥ –∏ —Å–∞–ª–∞—Ç)\n'
    '‚Ä¢ –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç –∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö\n'
    '‚Ä¢ –ü–æ–∑–≤–æ–ª—è—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª—è—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã\n\n'
    '<b>üõ† –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:</b>\n'
    '1Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ –∏–∑ TikTok –∏–ª–∏ Instagram Reels\n'
    '   ‚Äî —è –æ–±—Ä–∞–±–æ—Ç–∞—é –µ–≥–æ, —Ä–∞—Å–ø–æ–∑–Ω–∞—é —Ä–µ—á—å –∏ —Å–æ—Ö—Ä–∞–Ω—é —Ä–µ—Ü–µ–ø—Ç\n'
    '2Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –æ–¥–Ω—É –∏–∑ –∫–Ω–æ–ø–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:\n'
    '   ‚Ä¢ –ó–∞–≤—Ç—Ä–∞–∫\n'
    '   ‚Ä¢ –û—Å–Ω–æ–≤–Ω–æ–µ –±–ª—é–¥–æ\n'
    '   ‚Ä¢ –°–∞–ª–∞—Ç\n'
    '3Ô∏è‚É£ –í—ã –º–æ–∂–µ—Ç–µ:\n'
    '   ‚Ä¢ üìÇ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º\n'
    '   ‚Ä¢ ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤\n'
    '   ‚Ä¢ ‚ùå –£–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç\n'
    '   ‚Ä¢ üé≤ –ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç\n\n'
    '<b>üí¨ –ö–æ–º–∞–Ω–¥—ã:</b>\n'
    '/start ‚Äî –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞\n'
    '/help ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ\n\n'
    '<i>–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è! üçΩ</i>'
)


async def start(update: Update, context: CallbackContext) -> None:
    keyboard = [
        [KeyboardButton('–†–µ—Ü–µ–ø—Ç—ã'), KeyboardButton('–°–ª—É—á–∞–π–Ω–æ–µ –±–ª—é–¥–æ')],
        [KeyboardButton('–ó–∞–≥—Ä—É–∑–∏—Ç—å'), KeyboardButton('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã')]
    ]
    reply_markup = ReplyKeyboardMarkup(
        keyboard, one_time_keyboard=True, resize_keyboard=True
    )

    if update.message:
        await update.message.reply_text(
            START_TEXT,
            parse_mode='HTML',
            reply_markup=reply_markup
        )
    else:
        logger.error('update.message –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏ start')


async def handle_help(
        update: Update, context: ContextTypes.DEFAULT_TYPE
) -> None:
    message = get_safe_message_from_update(update)
    await message.reply_text(
        HELP_TEXT,
        parse_mode='HTML',
        disable_web_page_preview=True
    )
